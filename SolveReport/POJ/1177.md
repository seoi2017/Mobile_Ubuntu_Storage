# 评测信息
Accepted Memory:940KB Time:0ms Length:2871 Language:G++  
Submitted Time:2017-04-11 18:41:36  
# 题目信息
POJ1177[IOI1998]Picture  
HDU1828[IOI1998]Picture(Super Version)  
COGS263[IOI1998]矩形周长  
# 算法标签
[线段树][扫描线][离散化]  
# 题目大意
给定N个矩形，以左下角和右上角坐标表示，求其周长并。  
# 样例数据
## Example Input #1
7  
-15 0 5 10  
-5 8 20 25  
15 -4 24 14  
0 -6 16 4  
2 15 10 22  
30 10 36 20  
34 0 40 16  
## Example Output #1
228  
## Hint
0<=N<=5000  
所有坐标均在[-10000,10000]内  
# 解题思路
典型扫描线应用，注意以下几点：  
1、离散化时去重  
2、构建区间线段树而不是节点线段树  
核心思想：  
离散化横坐标，自下而上扫描  
由于是求周长，所以每次更新ans加上的值不单纯是一个乘积（求面积交时可以这么干，但要注意去重）  
而是由两部分构成：  
1、该条线段更新后的总覆盖长度减去上一次更新后总覆盖长度的绝对值，这样可以做到去重  
2、该条线段更新后总覆盖区间段数×2×该线段与下一条线段纵坐标离散化前的差值，这部分是竖线长度  
不好想的地方在于如何求出区间总覆盖段数，这点在代码里写的很明白，维护了一个合并分段标记  
扫描线真是一种神奇的线段树，没有pushdown，代码不长，但确实不好调试  
# AC代码
见～/OJ_Code/POJ/1177.cc  